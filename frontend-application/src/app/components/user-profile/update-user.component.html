<mat-card elevation="5" fxFlex class="content">
  <mat-card-title>
    <h2>{{title}}</h2>
  </mat-card-title>
  <mat-card-content>
    <p></p>
    <form *ngIf="!submitted">
      <div class="row" *ngIf="user">
        <div>
          <mat-form-field appearance="fill">
            <mat-label>First name: </mat-label>
            <input matInput name="firstName" [(ngModel)]="user.name" [formControl]="name" required>
            <mat-error *ngIf="name.invalid">You must enter first name</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Last name: </mat-label>
            <input matInput name="lastName" [(ngModel)]="user.surname" [formControl]="lastName" required>
            <mat-error *ngIf="name.invalid">You must enter last name</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Email: </mat-label>
            <input name ="email" [(ngModel)]="user.email" matInput [formControl]="email" required>
            <mat-error *ngIf="email.invalid">{{getEmailErrorMessage()}}</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>JMBG: </mat-label>
            <input matInput name="lastName" [(ngModel)]="user.jmbg" disabled>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>User type: </mat-label>
            <input name ="type" [(ngModel)]="user.userType" matInput disabled>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Club name: </mat-label>
            <input name ="club" [(ngModel)]="user.karateClub.name" matInput disabled>
          </mat-form-field>

<!--          <mat-form-field appearance="outline">-->
<!--            <mat-label>Password: </mat-label>-->
<!--            <input name ="password" [(ngModel)]="user.password" matInput required type="password" [formControl]="password" required>-->
<!--            <mat-error *ngIf="password.invalid">You must enter password with at least 6 characters</mat-error>-->
<!--          </mat-form-field>-->
<!--          <mat-form-field appearance="outline">-->
<!--            <mat-label>Repeat password: </mat-label>-->
<!--            <input name ="repeatedPassword" [(ngModel)]="passwordRepeated" matInput required type="password" [formControl]="passwordConfirm" required>-->
<!--            <mat-error *ngIf="passwordConfirm.invalid" >You must enter a repeated password</mat-error>-->
<!--          </mat-form-field>-->
<!--          <label *ngIf="!passwordMatchValidator()" style="color: red;">Passwords do not match</label>-->
        </div>
        <div>
          <mat-form-field appearance="fill">
            <mat-label>Street: </mat-label>
            <input name ="street" [(ngModel)]="user.address.street" matInput [formControl]="streetFormControl" required>
            <mat-error *ngIf="name.invalid">You must enter street</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Street number: </mat-label>
            <input name ="streetNumber" [(ngModel)]="user.address.streetNumber" [formControl]="streetNumberFormControl" matInput required>
            <mat-error *ngIf="name.invalid">You must enter street number</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>City: </mat-label>
            <input name ="city" [(ngModel)]="user.address.city" matInput [formControl]="cityFormControl" required>
            <mat-error *ngIf="name.invalid">You must enter city</mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Country: </mat-label>
            <input name ="country" [(ngModel)]="user.address.country" matInput [formControl]="countryFormControl" required>
            <mat-error *ngIf="name.invalid">You must enter country</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Phone number: </mat-label>
            <input name ="phoneNumber" [(ngModel)]="user.phoneNumber" matInput required>
          </mat-form-field>
          <mat-form-field appearance="fill" *ngIf="this.user.userType == 'ADMINISTRATOR' ">
            <mat-label>Club phone number: </mat-label>
            <input name ="karatePhoneNumber" [(ngModel)]="user.karateClub.phoneNumber" matInput disabled>
          </mat-form-field>
          <mat-form-field appearance="fill" *ngIf="this.user.userType == 'STUDENT' ">
            <mat-label>Belt color: </mat-label>
            <input name ="beltColor" [(ngModel)]="user.beltColor" matInput disabled>
          </mat-form-field>
          <mat-form-field appearance="fill" *ngIf="this.user.userType == 'COACH' ">
            <mat-label>Coach licence number: </mat-label>
            <input name ="licenceNumber" [(ngModel)]="user.licenceNumber" matInput disabled>
          </mat-form-field>

        </div>
      </div>
      <button mat-button style="alignment: center" class="change-password-button"
              color="primary"
              (click)="changePassword(user)">
        Want to change password?</button>
      <br>
      <button color="primary"
              style="width: 45%; margin-left: 27%;" mat-raised-button type="submit" (click)="update()">Update</button><br>
    </form>
    <mat-spinner *ngIf="submitted" mode="indeterminate"></mat-spinner>
  </mat-card-content>
</mat-card>



